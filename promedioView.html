<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css" type="text/css">
    <title>Document</title>
</head>
<body>
    
    <header>
        <h1>Algoritmos de Iteracion</h1>
        <img src="img/Development.svg">
    </header>

    <div id="menu">
               <ul>
                    <li><a href="index.html">Menú Principal</a></li>
                </ul>
    </div>

<!-- Empiezan los codigos -->

<main>

<div class="ContenedorHTML">
    <h1>HTML</h1>
        <pre>
            <code class="CodigoHTML">
                &#60!DOCTYPE html&gt
                &#60html lang="en"&gt
                &#60head&gt
                    &#60meta charset="UTF-8"&gt
                    &#60meta http-equiv="X-UA-Compatible" content="IE=edge"&gt
                    &#60meta name="viewport" content="width=device-width, initial-scale=1.0"&gt
                    &#60link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"&gt
                    &#60link href="css/promedio.css" rel="stylesheet" type="text/css"&gt
                    &#60title&gtPromedio&#60/title&gt
                &#60/head&gt
                &#60body&gt
                
                  
                  &#60nav class="navbar navbar-expand-lg navbar-light bg-warning"&gt
                    &#60div class="container-fluid"&gt
                      &#60a class="navbar-brand text-dark-50" href="#"&gtChris Torres&#60/a&gt
                      &#60button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation"&gt
                        &#60span class="navbar-toggler-icon"&gt&#60/span&gt
                      &#60/button&gt
                      &#60div class="collapse navbar-collapse" id="navbarNavDropdown"&gt
                        &#60ul class="navbar-nav"&gt
                          &#60li class="nav-item"&gt
                            &#60a class="nav-link active text-dark" aria-current="page" href="#"&gtPromedio&#60/a&gt
                          &#60/li&gt
                          &#60li class="nav-item"&gt
                            &#60a class="nav-link text-dark" href="sanitizante.html"&gtSanitizante&#60/a&gt
                          &#60/li&gt
                          &#60li class="nav-item dropdown"&gt
                            &#60a class="nav-link dropdown-toggle text-dark" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false"&gt
                              Algoritmos Iterativos
                            &#60/a&gt
                            &#60ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink"&gt
                              &#60li&gt&#60a class="dropdown-item" href="Factoriales.html"&gtFactoriales&#60/a&gt&#60/li&gt
                              &#60li&gt&#60a class="dropdown-item" href="Tabla.html"&gtTabla de multiplicar&#60/a&gt&#60/li&gt
                              &#60li&gt&#60a class="dropdown-item" href="NumPar.html"&gtNúmeros Pares&#60/a&gt&#60/li&gt
                            &#60/ul&gt
                          &#60/li&gt
                        &#60/ul&gt
                      &#60/div&gt
                    &#60/div&gt
                    &#60img id="logoUnid" src="/imgs/unid.png"&gt
                  &#60/nav&gt
                
                  &#60div class="cuadro"&gt
                      &#60header&gt
                        &#60h1&gtPromedio de calificaciones&#60/h1&gt
                      &#60/header&gt
                
                     
                    &#60form class="formulario"&gt
                        &#60div&gt
                            &#60label&gtNombre del alumno&#60/label&gt&#60input type="text" name="nombre"&gt
                        &#60/div&gt
                        &#60div&gt
                          &#60label for="nota1"&gtNota 1&#60/label&gt&#60input type="text" class="form-control" name="nota1" id="nota1" min="0" max="10"&gt
                          &#60label for="nota2"&gtNota 2&#60/label&gt&#60input type="text" class="form-control" name="nota2" id="nota2" min="0" max="10"&gt
                          &#60label for="nota3"&gtNota 3&#60/label&gt&#60input type="text" class="form-control" name="nota3" id="nota3" min="0" max="10"&gt
                        &#60/div&gt
                        &#60div&gt
                            &#60br&gt&#60input type="button" value="Agregar" class="agregar" onclick="agregarTabla()"&gt
                        &#60/div&gt
                    &#60/form&gt
                     
                    &#60table id="listado" class="hide"&gt
                        &#60thead&gt
                            &#60th&gtAlumno&#60/th&gt
                            &#60th&gtNota&#60/th&gt
                        &#60/thead&gt
                        &#60tbody&gt
                        &#60/tbody&gt
                    &#60/table&gt
                     
                    &#60div id="calculos" class='hide'&gt&#60/div&gt
                
                    &#60/div&gt
                &#60!--
                    &#60img id= "design" src="/imgs/Designer.png"&gt--&gt
                
                      &#60script src="js/promedio.js"&gt&#60/script&gt
                    &#60script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"&gt&#60/script&gt
                &#60/body&gt
                &#60/html&gt  
            </code>
        </pre>
</div>

<div class="ContenedorCSS">
<h1>CSS</h1>
<pre>
    <code class="CodigoCSS">
        * {box-sizing: border-box;font-family:Arial;}
.hide {display:none;}
.right {text-align:right;}
.error {border:1px solid Red;}

.nombre {width:100%}
.formulario {text-align:center;width:400px;border:1px solid #eee;padding:10px;}
.formulario label,.formulario label~input {
width: 50%;
display: inline-block;

}
.formulario label {text-align:right;padding-right:20px;}
.formulario>div {margin-top:10px;overflow:hidden;}
.agregar {
background-color:green;
border-color:green;
color:white;
}

h1{
position: absolute;
left: 500px;
top: 100px;
}

#logoUnid{
position: absolute;
height: 120px;
right: 10px;
}

.litrosCuadro{
padding: 50px;
}

.litrosCuadro h1{
position: absolute;
left: 50px;
}

.cuadro {
position: absolute;
left: 200px;
top: 200px;
}

.cuadro header h1{
position: absolute;
left: 100px;
top: -100px;
}

.cuadroTabla{
position: absolute;
padding: 100px;
top: 100px;
}

.cuadroTabla h1{
position: absolute;
left: 100px;
top: 0px;
}

#logoTabla{
position: absolute;
height: 600px;
top: 250px;
right: 200px;
}

#design {
position: absolute;
left: 900px;
top: 200px;
height: 600px;
}

#logoSanitizante{
height: 450px;
}

#listado, #calculos {
border:1px solid #eee;
margin-top:20px;
width:400px;
}
#listado th {background-color:#eee;padding:5px 10px;}
#listado input[type=button] {
background-color:Red;
border-color:Red;
color:white;
}

#calculos div {padding:5px;}
#calculos span {font-weight:bold;}

    </code>
</pre>
</div>


<div class="ContenedorJS">
<h1>JavaScript</h1>
<pre>
    <code class="CodigoJS">

      function agregarTabla(){
        let nombre=document.querySelector("input[name=nombre]");
        let promedio = calc_promedio();
     
        // mostramos un error si no ha recibido el nombre
        if(!nombre.value)
        {
            nombre.classList.add("error");
            return;
        }
        nombre.classList.remove("error");
        if(promedio == 0){
            return 0
        }
    
        // añadimos el alumno a la tabla crando el tr, td's y el botón para eliminarlo
        let tr=document.createElement("tr");
    
        let tdNombre=document.createElement("td");
        let txt=document.createTextNode(nombre.value);
        tdNombre.appendChild(txt);
        tdNombre.className="nombre";
     
        let tdNota=document.createElement("td");
        txt=document.createTextNode(promedio);
        tdNota.appendChild(txt);
        tdNota.className="right";
     
        let tdRemove=document.createElement("td");
        let buttonRemove=document.createElement("input")
        buttonRemove.type="button";
        buttonRemove.value="Eliminar";
        buttonRemove.onclick=function () {
            // elimina la columna
            this.parentElement.parentElement.remove();
    
    
            // Si no hay ningun alumno, escondemos la tabla
            if(document.getElementById("listado").querySelector("tbody").querySelectorAll("tr").length==0)
            {
                document.getElementById("listado").classList.add("hide");
                document.getElementById("calculos").classList.add("hide");
            }
            calculos();
        };
        tdRemove.appendChild(buttonRemove);
     
        tr.appendChild(tdNombre);
        tr.appendChild(tdNota);
        tr.appendChild(tdRemove);
     
        let tbody=document.getElementById("listado").querySelector("tbody").appendChild(tr);
     
        // eliminamos la clase que tiene oculta la tabla cando no hay ningun alumno
        document.getElementById("listado").classList.remove("hide");
        document.getElementById("calculos").classList.remove("hide");
     
        //limpiamos los valores del input
        document.getElementById('nota1').value = ""
        document.getElementById('nota2').value = ""
        document.getElementById('nota3').value = ""
        nombre.value="";
        nombre.focus();
     
        // realizamos los calculos
        calculos();
    }
    
    /**
     * funcion que realiza los calculos leyendo el contenido de la tabla
     */
    function calculos() {
        // Obtenemos un array con los alumnos de la tabla
        let alumnosAgregados=document.getElementById("listado").querySelector("tbody").querySelectorAll("tr");
     
        // guardamos en un array todos los alumnos aprobados, suspendido.
        // promocionados, con mejor nota y con peor nota
        let aprobados=[];
        let suspendidos=[];
        let promocionados=[];
     
        let mejorNotaAlumnos=[];
        let mejorNota=0;
     
        let peorNotaAlumnos=[];
        let peorNota=10;
     
        let mediaNota=0;
     
        // bucle por cada uno de los alumnos
        for (let i=0;i<alumnosAgregados.length;i++)
        {
              let tds=alumnosAgregados[i].getElementsByTagName('td');
      
              // mejor nota
              if(parseFloat(tds[1].innerHTML)>mejorNota) {
                  mejorNotaAlumno=[tds[0].innerHTML];
                  mejorNota=parseFloat(tds[1].innerHTML);
              }else if(parseFloat(tds[1].innerHTML)==mejorNota){
                  mejorNotaAlumno.push(tds[0].innerHTML);
              }
      
              // peor nota
              if(parseFloat(tds[1].innerHTML)<peorNota) {
                  peorNotaAlumnos=[tds[0].innerHTML];
                  peorNota=parseFloat(tds[1].innerHTML);
              }else if(parseFloat(tds[1].innerHTML)==peorNota){
                  peorNotaAlumnos.push(tds[0].innerHTML);
              }
      
              // aprobados y suspendidos
              if(parseFloat(tds[1].innerHTML)>=7) {
                  aprobados.push(tds[0].innerHTML);
              }else{
                  suspendidos.push(tds[0].innerHTML);
              }
      
              // promocionados
              if(parseFloat(tds[1].innerHTML)>=7) {
                  promocionados.push(tds[0].innerHTML);
              }
      
              mediaNota+=parseFloat(tds[1].innerHTML);
          }
      
          // mostramos el resultado
          let result="<div>La mejor nota es de: <span>"+mejorNotaAlumno+" ("+mejorNota+")</span></div>";
          result+="<div>La peor nota es de: <span>"+peorNotaAlumnos+" ("+peorNota+")</span></div>";
          result+="<div>La media es de: <span>"+(mediaNota/alumnosAgregados.length).toFixed(2)+"</span></div>";
          result+="<div>Los aprobados son: <span>"+aprobados+"</span></div>";
          result+="<div>Los suspendidos son: <span>"+suspendidos+"</span></div>";
          result+="<div>Los promocionados son: <span>"+promocionados+"</span></div>";
          result+="<div>El promedio de aprobados es: <span>"+(aprobados.length*100/alumnosAgregados.length).toFixed(2)+"%</span></div>";
          result+="<div>El promedio de promocionados es: <span>"+(promocionados.length*100/alumnosAgregados.length).toFixed(2)+"%</span></div>";
      
          document.getElementById("calculos").innerHTML=result;
      
      }
      
      function calc_promedio(){
        let n1 = parseInt(document.getElementById("nota1").value);
        let n2 = parseInt(document.getElementById("nota2").value);
        let n3 = parseInt(document.getElementById("nota3").value);
        let p = (n1+n2+n3)/3;
          // mostramos un error si no ha recibido una nota
      
          if(n1 > 10 || n1 < 0 || isNaN(n1)){
              alert("Nota 1 invalida")
              return 0
          }
          if(n2 > 10 || n2 < 0 || isNaN(n2)){
              alert("Nota 2 invalida")
              return 0
          }
          if(n3 > 10 || n3 < 0 || isNaN(n3)){
              alert("Nota 3 invalida")
              return 0
          }
        return p;
      }
    

    </code>
</pre>
</div>

<iframe id="cuadroView" src="AlgoritmosIterativos/promedio.html"></iframe>

</main>    


<footer>
  <h1>Universidad Interamericana para el Desarrollo</h1>
  <img src="img/UNID.svg">
</footer>

</body>
</html>